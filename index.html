<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="UTF-8">
  <title>Daily Paper Reader</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum=1.0">
  <!-- 初始引用信息，具体论文信息会由 Docsify 插件在运行时覆盖 -->
  <meta name="citation_journal_title" content="Daily Paper Reader (ArXiv)">
  <meta name="citation_title" content="Daily Paper Reader Default Entry">
  <meta name="citation_author" content="Daily Paper Reader Team">
  <meta name="citation_author" content="Docsify Renderer">
  <meta name="citation_date" content="2024/01/01">
  <meta name="citation_pdf_url" content="https://daily-paper-reader.invalid/default.pdf">
  <meta name="citation_volume" content="1">
  <meta name="citation_issue" content="1">
  <meta name="citation_firstpage" content="100">
  <meta name="citation_lastpage" content="110">

  <!-- 网站图标：优先使用 SVG，其次 PNG 作为兼容回退 -->
  <link rel="icon" type="image/svg+xml" href="app/asserts/icon.svg">
  <link rel="alternate icon" type="image/png" href="app/asserts/icon.png">

  <!-- Docsify 默认主题 -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">

  <!-- KaTeX 用于公式渲染 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

  <!-- YAML 解析：用于在前端读写 config.yaml -->
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>

  <!-- Libsodium：用于在前端加密写入 GitHub Secrets -->
  <script src="https://cdn.jsdelivr.net/npm/libsodium-wrappers@0.7.13/dist/modules/libsodium-wrappers.js"></script>

  <!-- 自定义样式，包含评论区、订阅浮层、侧边栏拖拽等 UI -->
  <link rel="stylesheet" href="app/app.css">
</head>
<body>
  <!-- 首次进入时的密钥解锁 / 游客模式选择 -->
  <div id="secret-gate-overlay" class="secret-gate-overlay secret-gate-hidden">
    <div id="secret-gate-modal" class="secret-gate-modal">
      <h2 style="margin-top:0;">🔐 解锁密钥</h2>
      <p style="font-size:13px; color:#555; margin-bottom:8px;">
        为保护你的大模型 API Key 等敏感配置，请输入本地密码解锁，
        或选择以游客身份访问（仅支持阅读论文，无法使用后台面板和大模型对话）。
      </p>
      <label for="secret-gate-password" style="font-size:13px; color:#333; display:block; margin-bottom:4px;">
        解锁密码（至少 8 位，包含数字、小写字母、大写字母和特殊符号）：
      </label>
      <input
        id="secret-gate-password"
        type="password"
        autocomplete="off"
        style="width:100%; box-sizing:border-box; padding:6px 8px; margin-bottom:6px; font-size:13px;"
      />
      <div id="secret-gate-error" style="min-height:18px; font-size:12px; color:#999; margin-bottom:8px;">
        密码仅在本地用于解密，不会上传到服务器。
      </div>
      <div class="secret-gate-actions">
        <button id="secret-gate-guest" type="button" class="secret-gate-btn secondary">
          以游客身份访问
        </button>
        <button id="secret-gate-unlock" type="button" class="secret-gate-btn primary">
          解锁密钥
        </button>
      </div>
    </div>
  </div>

  <div id="app">加载中...</div>

  <!-- 密钥会话管理（需在其他模块之前加载，以便设置 DPR_ACCESS_MODE / decoded_secret_private） -->
  <script src="app/secret.session.js"></script>

  <!-- Docsify 配置与公共插件（评论区 + Zotero 元数据） -->
  <script src="app/docsify-plugin.js"></script>
  <!-- 私人研讨区聊天模块 -->
  <script src="app/chat.discussion.js"></script>

  <!-- GitHub Token 订阅配置模块 -->
  <script src="app/subscriptions.github-token.js"></script>
  <!-- 订阅关键词 / Zotero / 跟踪论文模块 -->
  <script src="app/subscriptions.keywords.js"></script>
  <script src="app/subscriptions.zotero.js"></script>
  <script src="app/subscriptions.tracked-papers.js"></script>
  <script src="app/subscriptions.manager.js"></script>
  <script>
    // 初始化订阅管理模块（使用左下角 📚 按钮触发）
    if (window.SubscriptionsManager) {
      window.SubscriptionsManager.init();
    }
  </script>

  <!-- 一些通用脚本：布局 + 订阅入口按钮 + API Base 配置 -->
  <script src="app/ui.layout-and-subscriptions-entry.js"></script>

  <!-- Docsify 主库（最后加载，读取 window.$docsify 配置） -->
  <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>
</body>
</html>
